{% load static %}
<div class="content-wrapper">
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>Tasdiqlash</h1>
        </div>
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="#">Home</a></li>
            <li class="breadcrumb-item active">Tasdiqlash</li>
          </ol>
        </div>
      </div>
    </div>
  </section>

  <section class="content">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">

          <!-- Umumiy Export tugmalari -->
          <div id="export-buttons" class="mb-3 text-right">
            <span class="mr-2 font-weight-bold">Save as:</span>
            <button id="export-excel" class="btn btn-success btn-sm">Excel</button>
            <button id="export-pdf" class="btn btn-danger btn-sm">PDF</button>
            <button id="export-csv" class="btn btn-primary btn-sm">CSV</button>
          </div>

          <!-- Jadval 1 -->
          <div class="card">
            <div class="card-header"><h3 class="card-title font-weight-bold">Tasdiqlangan Talabalar</h3></div>
            <div class="card-body">
              <div style="max-height:400px;overflow-y:auto;">
                <table id="example1" class="table table-bordered table-striped table-hover">
                  <thead>
                  <tr>
                    <th>№</th>
                    <th>Telegram id</th>
                    <th>Username</th>
                    <th>F.I.O</th>
                    <th>Group ID</th>
                    <th>PINFL</th>
                    <th>Tg Tel:</th>
                    <th>Tel:</th>
                    <th>Parent Tel:</th>
                    <th>Manzil</th>
                  </tr>
                  </thead>
                  <tbody>
                    {% for reg_t in reg_true %}
                    <tr>
                      <th>{{ forloop.counter }}</th>
                      <td>{{ reg_t.telegram_id }}</td>
                      <td>{{ reg_t.username }}</td>
                      <td>{{ reg_t.fio }}</td>
                      <td>{{ reg_t.register_group }}</td>
                      <td>{{ reg_t.pnfl }}</td>
                      <td>{{ reg_t.tg_tel }}</td>
                      <td>{{ reg_t.tel }}</td>
                      <td>{{ reg_t.parent_tel }}</td>
                      <td>{{ reg_t.address }}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Jadval 2 -->
          <div class="card mt-4">
            <div class="card-header"><h3 class="card-title font-weight-bold">O'qituvchilar</h3></div>
            <div class="card-body">
              <div style="max-height:400px;overflow-y:auto;">
                <table id="example2" class="table table-bordered table-striped table-hover">
                  <thead>
                  <tr>
                    <th>№</th>
                    <th>Telegram id</th>
                    <th>Username</th>
                    <th>F.I.O</th>
                    <th>Group ID</th>
                    <th>PINFL</th>
                    <th>Tg Tel:</th>
                    <th>Tel:</th>
                    <th>Parent Tel:</th>
                    <th>Manzil</th>
                  </tr>
                  </thead>
                  <tbody>
                    {% for teach in teacher %}
                    <tr>
                      <th>{{ forloop.counter }}</th>
                      <td>{{ teach.telegram_id }}</td>
                      <td>{{ teach.username }}</td>
                      <td>{{ teach.fio }}</td>
                      <td>{{ teach.register_group }}</td>
                      <td>{{ teach.pnfl }}</td>
                      <td>{{ teach.tg_tel }}</td>
                      <td>{{ teach.tel }}</td>
                      <td>{{ teach.parent_tel }}</td>
                      <td>{{ teach.address }}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Jadval 3 -->
          <div class="card mt-4">
            <div class="card-header"><h3 class="card-title font-weight-bold">Tasdiqlanmagan Talabalar</h3></div>
            <div class="card-body">
              <div style="max-height:400px;overflow-y:auto;">
                <form method="post" action="{% url 'bulk_update_register' %}">
                  {% csrf_token %}
                  <table id="example3" class="table table-bordered table-striped table-hover">
                    <thead>
                    <tr>
                      <th>№</th>
                      <th>Telegram id</th>
                      <th>Username</th>
                      <th>F.I.O</th>
                      <th>Group ID</th>
                      <th>PINFL</th>
                      <th>Tg Tel:</th>
                      <th>Tel:</th>
                      <th>Parent Tel:</th>
                      <th>Manzil</th>
                      <th>Talaba</th>
                      <th>O'qituvchi</th>
                    </tr>
                    </thead>
                    <tbody>
                      {% for reg_f in reg_false %}
                      <tr>
                        <th>{{ forloop.counter }}</th>
                        <td>{{ reg_f.telegram_id }}</td>
                        <td>{{ reg_f.username }}</td>
                        <td>{{ reg_f.fio }}</td>
                        <td>{{ reg_f.register_group }}</td>
                        <td>{{ reg_f.pnfl }}</td>
                        <td>{{ reg_f.tg_tel }}</td>
                        <td>{{ reg_f.tel }}</td>
                        <td>{{ reg_f.parent_tel }}</td>
                        <td>{{ reg_f.address }}</td>
                        <td style="text-align:center;">
                          <div class="form-check">
                            <input class="form-check-input student-checkbox" 
                                  type="checkbox" 
                                  name="active_students" 
                                  value="{{ reg_f.id }}" 
                                  id="student_{{ reg_f.id }}">
                          </div>
                        </td>
                        <td style="text-align:center;">
                          <div class="form-check">
                            <input class="form-check-input teacher-checkbox" 
                                  type="checkbox" 
                                  name="teachers" 
                                  value="{{ reg_f.id }}" 
                                  id="teacher_{{ reg_f.id }}">
                          </div>
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                  <div class="mt-3 text-right">
                    <button type="submit" class="btn btn-success">Saqlash</button>
                  </div>
                </form>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>
</div>